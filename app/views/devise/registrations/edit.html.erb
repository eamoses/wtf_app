<div class = "col-xs-8 col-xs-offset-2 space-top card">
  <div class = "col-xs-10 col-xs-offset-1 space-top">
    <%= link_to user_path(@user), method: :get, class: "pull-right" do %>
      <i class="glyphicon glyphicon-remove"></i>
    <% end %>
    <div class = "row">
      <div class = "col-sm-12">
        <h2>Edit Profile</h2>
      </div>
    </div>
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
      <%= devise_error_messages! %>

      <div class="row">
        <div class = "col-sm-6 space-top">
          <%= f.label "First Name" %><br />
          <%= f.text_field :firstname, autocomplete: "off", class: "form-control flat-input", required: "required" %>
        </div>
        <div class = "col-sm-6 space-top">
          <%= f.label "Last Name" %><br />
          <%= f.text_field :lastname, autocomplete: "off", class: "form-control flat-input", required: "required" %>
        </div>
      </div>
      <div class = "row">
        <hr />
      </div>

      <div class="row">
        <div class = "col-sm-6">
          <%= f.label :email %><br />
          <%= f.email_field :email, autofocus: true, class: "form-control flat-input", required: "required" %>
        </div>

      </div>
      <div class = "row">
        <hr />
      </div>
      <div class="row">
        <div class = "col-sm-12">
          <%= f.label :avatar %><br />

          <!-- Restyles upload button to look consistent -->
          <div class="input-group">
            <span class="input-group-btn">
              <span class="btn btn-small btn-primary btn-inverse" onclick="$(this).parent().find('input[type=file]').click();">Browse</span>
              <%= f.file_field :avatar, onchange: "$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\\\|/]/).pop());", style: "display: none;" %>
            </span>
            <span class="form-control flat-input"></span>
          </div>

        </div>
      </div>

      <div class = "row">
        <hr />
      </div>
      <div class = "row">
        <div class = "col-sm-12">
          <%= f.label :current_password %><br />
          <%= f.password_field :current_password, autocomplete: "off", class: "form-control flat-input", required: "required", placeholder: "Required to make any changes" %><br />
        </div>
      </div>
      <div class = "row">
        <hr />
      </div>
      <div class="row space-top">
        <div class = "col-sm-12">
          <button class="btn btn-primary btn-block" type="button" data-toggle="collapse" data-target="#collapse" aria-expanded="false" aria-controls="collapseExample">
            Update Password
          </button>
          <div class="collapse" id="collapse">
            <div class="well">

              <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
              <% end %>

                <%= f.label :password %><br />
                <%= f.password_field :password, autocomplete: "off", class: "form-control flat-input flat-input-dark", placeholder: "New Password" %><br />

                <%= f.label :password_confirmation %><br />
                <%= f.password_field :password_confirmation, autocomplete: "off", class: "form-control flat-input flat-input-dark", placeholder: "Confirm New Password" %>
            </div>
          </div>
          <hr />
        </div>


      </div>

      <div class="actions row space-top">
        <div class = "col-sm-12">
          <%= button_to "Save", user_path(@user), method: :get, class:"btn btn-success btn-block" %>
        </div>
      </div>
      <div class = "row space-top">
        <div class = "col-sm-12">
          <%= link_to "Cancel", user_path(@user), method: :get, class:"btn btn-block btn-default" %>
        </div>
      </div>
      <div class = "row">
        <hr />
      </div>
      <div class = "row space-top">
        <div class = "col-sm-12">
          <%= button_to "Delete my account", registration_path(resource_name), data: { confirm: " " }, method: :delete, class:"btn btn-block btn-danger" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
